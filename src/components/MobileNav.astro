---
import { Image } from "astro:assets";
import { logo, menuIcon, closeIcon } from "../assets/icons";
---

<!-- Mobile Menu Button -->
<button
  id="mobile-menu-button"
  class="md:hidden text-white z-50"
  aria-label="Toggle menu"
>
  <Image class="w-full" src={menuIcon} alt="Menu" width={27} height={24} />
</button>

<!-- Mobile Menu Overlay -->
<div
  id="mobile-menu"
  class="fixed top-0 left-0 right-0 bg-white z-100 transform -translate-y-full transition-transform duration-200 ease-out md:hidden"
>
  <!-- Header with close button and logo -->
  <div class="flex justify-between items-center p-4">
    <button id="mobile-menu-close" class="text-black" aria-label="Close menu">
      <Image src={closeIcon} alt="Close" width={32} height={32} />
    </button>
    <Image src={logo} alt="Pollux Logo" width={0} height={40} class="invert" />
  </div>

  <!-- Navigation -->
  <nav class="flex flex-col px-4 pb-8 pt-20 space-y-2">
    <a href="#" class="mobile-menu-link">Pollux</a>
    <a href="#services" class="mobile-menu-link">Konsulterande</a>
    <a href="#about" class="mobile-menu-link">Om Pollux</a>
    <a href="#clients" class="mobile-menu-link">Kunder</a>
    <a href="#contact" class="mobile-menu-link">Kontakt</a>
  </nav>
</div>

<style>
  .mobile-menu-link {
    color: #000;
    font-family: "Neue Haas Grotesk Text Pro", sans-serif;
    font-size: 28px;
    font-style: normal;
    font-weight: 400;
    line-height: 32px;
    width: fit-content;
  }
</style>

<script>
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileMenuClose = document.getElementById("mobile-menu-close");
  const mobileMenuLinks = document.querySelectorAll(".mobile-menu-link");

  function openMenu() {
    mobileMenu?.classList.remove("-translate-y-full");
  }

  function closeMenu() {
    mobileMenu?.classList.add("-translate-y-full");
  }

  mobileMenuButton?.addEventListener("click", openMenu);
  mobileMenuClose?.addEventListener("click", closeMenu);

  mobileMenuLinks.forEach((link) => {
    link.addEventListener("click", closeMenu);
  });
</script>
